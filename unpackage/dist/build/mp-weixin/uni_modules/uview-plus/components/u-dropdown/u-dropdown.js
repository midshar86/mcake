"use strict";const t=require("./props.js"),i=require("../../libs/mixin/mpMixin.js"),e=require("../../libs/mixin/mixin.js"),n=require("../../libs/function/index.js"),o=require("../../../../common/vendor.js"),s={name:"u-dropdown",mixins:[i.mpMixin,e.mixin,t.props],data:()=>({showDropdown:!0,menuList:[],active:!1,current:99999,contentStyle:{zIndex:-1,opacity:0},highlightIndex:99999,contentHeight:0}),computed:{popupStyle(){let t={};return t.transform=`translateY(${this.active?0:"-100%"})`,t["transition-duration"]=this.duration/1e3+"s",t.borderRadius=`0 0 ${n.addUnit(this.borderRadius)} ${n.addUnit(this.borderRadius)}`,t}},created(){this.children=[]},mounted(){this.getContentHeight()},emits:["open","close"],methods:{addUnit:n.addUnit,init(){this.menuList=[],this.children.map((t=>{t.init()}))},menuClick(t){if(!this.menuList[t].disabled)return t===this.current&&this.closeOnClickSelf?(this.close(),void setTimeout((()=>{this.children[t].active=!1}),this.duration)):void this.open(t)},open(t){this.contentHeight<1&&this.getContentHeight(),this.contentStyle={zIndex:11},this.active=!0,this.current=t,this.children.map(((i,e)=>{i.active=t==e})),this.$emit("open",this.current)},close(){this.$emit("close",this.current),this.active=!1,this.current=99999,this.contentStyle={zIndex:-1,opacity:0}},maskClick(){this.closeOnClickMask&&this.close()},highlight(t){this.highlightIndex=void 0!==t?t:99999},getContentHeight(){let t=n.sys().windowHeight;this.$uGetRect(".u-dropdown__menu").then((i=>{this.contentHeight=t-i.bottom}))}}};if(!Array){o.resolveComponent("u-icon")()}Math;const c=o._export_sfc(s,[["render",function(t,i,e,n,s,c){return{a:o.f(s.menuList,((i,e,n)=>({a:o.t(i.title),b:i.disabled?"#c0c4cc":e===s.current||s.highlightIndex==e?t.activeColor:t.inactiveColor,c:"c2e17617-0-"+n,d:o.p({"custom-style":{display:"flex"},name:t.menuIcon,size:c.addUnit(t.menuIconSize),color:e===s.current||s.highlightIndex==e?t.activeColor:"#c0c4cc"}),e:e===s.current?1:"",f:e,g:o.o((t=>c.menuClick(e)),e)}))),b:c.addUnit(t.titleSize),c:c.addUnit(t.height),d:t.borderBottom?1:"",e:o.o((()=>{})),f:o.s(c.popupStyle),g:o.s(s.contentStyle),h:o.s({transition:`opacity ${t.duration/1e3}s linear`,top:c.addUnit(t.height),height:s.contentHeight+"px"}),i:o.o(((...t)=>c.maskClick&&c.maskClick(...t))),j:o.o((()=>{}))}}],["__scopeId","data-v-c2e17617"]]);wx.createComponent(c);
