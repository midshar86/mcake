"use strict";const e=require("../../common/vendor.js"),s=require("../../utils/req.js");if(!Array){(e.resolveComponent("up-button")+e.resolveComponent("up-toast"))()}Math||((()=>"../../uni_modules/uview-plus/components/u-button/u-button.js")+(()=>"../../uni_modules/uview-plus/components/u-toast/u-toast.js"))();const a={__name:"register",setup(a){const o=e.ref(null),t=e.ref({username:"",password:""}),u=async function(){if(!t.value.username||!t.value.password)return void o.value.show({message:"用户名或密码不能为空！",duration:1e3});if(!/^[a-z][\d|\w]{5,}/i.test(t.value.username))return void o.value.show({message:"用户名必须以字母开头,并且不能少于6位数!",duration:1e3});let{password:a}=t.value;if(/[a-z]/.test(a)&&/[A-Z]/.test(a)&&/\d/.test(a)&&a.length>=6){let a=await s._post("/1.1/users",t.value);console.log(a),201===a.statusCode&&o.value.show({message:"注册成功!即将跳转至登录页面...",duration:1e3,complete(){e.index.navigateTo({url:"/pages/login/login"})}}),400===a.statusCode&&o.value.show({message:"用户已注册!",duration:1e3})}else o.value.show({message:"用户名密码必须包含大小写字母和数字，并且不少于6位数!",duration:1e3})},n=function(){e.index.navigateTo({url:"/pages/login/login"})};return(s,a)=>({a:t.value.username,b:e.o((e=>t.value.username=e.detail.value)),c:t.value.password,d:e.o((e=>t.value.password=e.detail.value)),e:e.o(u),f:e.p({text:"点击注册"}),g:e.o(n),h:e.sr(o,"61c5ada6-1",{k:"uToastRef"})})}};wx.createPage(a);
