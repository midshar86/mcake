"use strict";const e=require("../../common/vendor.js"),a=require("../../utils/req.js"),t=require("../../store/user.js");if(!Array){(e.resolveComponent("header-comp")+e.resolveComponent("separator-bar-comp")+e.resolveComponent("item-comp")+e.resolveComponent("up-toast"))()}Math||(l+(()=>"../../uni_modules/uview-plus/components/u-toast/u-toast.js"))();const l=()=>"../../components/navBar.js",s={__name:"home",setup(l){const s=e.ref(!1),r=e.ref(""),n=e.ref([]),o=e.ref([]),u=e.ref([]);e.ref([]);const i=e.ref(""),c=e.ref(""),d=e.ref(""),v=e.ref(""),f=e.ref(!1),p=t.useUserStore(),g=e.ref(null),m=function(e){let{scrollTop:a}=e.detail;a>500?s.value=!0:(s.value=!1,r.value="")},h=function(){r.value="top"},b=function(a){e.index.navigateTo({url:`/pages/detail/detail?sku=${a.sku}`})},x=function(a){p.isLogin?e.index.navigateTo({url:`/pages/detail/detail?sku=${a.sku}&target=true`}):g.value.show({message:"未登录,即将跳转至登录页面...",duration:1e3,complete(){e.index.navigateTo({url:"/pages/login/login"})}})},w=function(e){f.value=e};return e.onLoad((()=>{a._get("/1.1/classes/swiper/66dd037acf05a13cc54ba540").then((e=>{n.value=e.data.data.content.list})),a._get("/1.1/classes/swiper/66dd037acf05a13cc54ba541").then((e=>{o.value=e.data.data.content.list,i.value=e.data})),a._get("/1.1/classes/swiper/66dd037acf05a13cc54ba542").then((e=>{u.value=e.data.data.content.list,c.value=e.data})),a._get("/1.1/classes/swiper/66dd037acf05a13cc54ba544").then((e=>{d.value=e.data.data.content})),a._get("/1.1/classes/classfiy").then((a=>{v.value=a.data,e.index.setStorage({key:"classList",data:JSON.stringify(v.value.results)})}))})),(a,t)=>{var l,p,_,k;return{a:e.o(w),b:e.p({show:f.value,list:v.value.results}),c:e.o((e=>f.value=!0)),d:e.f(n.value,((a,t,l)=>({a:a.img,b:e.o((t=>{return l=a,void e.index.navigateTo({url:`../posterPage/posterPage?path=${l.url}`});var l}),a.url),c:a.url}))),e:e.p({text:"蛋糕精选",french:null==(l=i.value.data)?void 0:l.content.subtitle}),f:e.f(o.value,((a,t,l)=>({a:a.img,b:e.o((e=>b(a)),a.url),c:a.url,d:e.o((e=>x(a)),a.url),e:"d836aaa6-3-"+l,f:e.p({title:a.title,price:a.price,french:a.french,sign:"推荐"})}))),g:e.p({text:"小吃精选",french:null==(p=c.value.data)?void 0:p.content.subtitle}),h:e.f(u.value,((a,t,l)=>({a:a.img,b:e.o((e=>b(a)),a.url),c:a.url,d:e.o((e=>x(a)),a.url),e:"d836aaa6-5-"+l,f:e.p({title:a.title,price:a.price,french:a.french,sign:"推荐"})}))),i:e.p({text:"限时活动",french:d.value.subtitle}),j:null==(k=null==(_=d.value.adv)?void 0:_[0])?void 0:k.img,k:s.value,l:e.o(h),m:e.sr(g,"d836aaa6-7",{k:"uToastRef"}),n:e.o(m),o:r.value}}}};wx.createPage(s);
