"use strict";const e=require("../../common/vendor.js"),t=require("../../store/settleList.js"),o=require("../../store/address.js");if(!Array){(e.resolveComponent("up-icon")+e.resolveComponent("up-modal")+e.resolveComponent("up-toast"))()}Math||((()=>"../../uni_modules/uview-plus/components/u-icon/u-icon.js")+(()=>"../../uni_modules/uview-plus/components/u-modal/u-modal.js")+(()=>"../../uni_modules/uview-plus/components/u-toast/u-toast.js"))();const s={__name:"settleAccounts",setup(s){const u=e.ref(!1),n=t.useSettleStore(),l=o.useAddressStore(),r=e.ref(n.goodsList),i=e.ref(null),a=function(){u.value=!0},c=async function(){await new Promise(((e,t)=>{let o=setTimeout((()=>{u.value=!1,e(),clearTimeout(o)}),2e3)})),i.value.show({type:"success",message:"支付成功!",duration:2e3,iconUrl:"https://cdn.uviewui.com/uview/demo/toast/success.png",complete(){n.clearGoodsList(),r.value=[]}})},d=function(){i.value.show({type:"error",message:"取消支付!",duration:2e3,iconUrl:"https://cdn.uviewui.com/uview/demo/toast/error.png"}),u.value=!1},v=function(){e.index.navigateTo({url:"/pages/address/address"})},m=e.computed((()=>{let{selectIndex:e}=l;return-1===e?l.addressList.filter((e=>e.isDefault))[0]:l.addressList[e]}));return console.log(m),(t,o)=>{var s,p,f,g,w,h,y;return e.e({a:e.unref(l).addressList.length},e.unref(l).addressList.length?{b:e.t(null==(s=m.value)?void 0:s.name),c:e.t(null==(p=m.value)?void 0:p.phoneNum),d:e.t((null==(f=m.value)?void 0:f.province)?null==(g=m.value)?void 0:g.province:""),e:e.t(null==(w=m.value)?void 0:w.city),f:e.t(null==(h=m.value)?void 0:h.countries),g:e.t(null==(y=m.value)?void 0:y.details)}:{},{h:e.p({name:"arrow-right"}),i:e.o(v),j:e.f(r.value,((t,o,s)=>({a:t.img,b:e.t(t.name),c:e.t(t.french),d:e.t(t.price),e:e.t(t.describe),f:e.t(Number(t.price)*t.buyNum),g:e.t(t.buyNum),h:o}))),k:e.t(e.unref(n).totalSettlePrice),l:e.o(a),m:!Boolean(e.unref(n).totalSettlePrice),n:e.o(d),o:e.o(c),p:e.p({show:u.value,asyncClose:!0,title:"确认支付吗?",showCancelButton:!0}),q:e.sr(i,"6ff43d6d-2",{k:"uToastRef"})})}}};wx.createPage(s);
